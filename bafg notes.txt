###############################################################################

Format of .txt files

Two newlines in a row (i.e. a blank line) is a paragraph division: <p/>

Info:

{com:[name]} gives the common name for the flower(s) on the page.  If
not specified, it defaults to the page name.

{sci:[name]} gives the scientific name for the flower(s) on the page.
It should always be specified if the common name is different than the
page name.  If not specified, the iNaturalist observation csv file is
searched for the page name (common name) to find the scientific name.

Image links:

{[img].jpg} is replaced with a thumbnail of the image and a link to the
full-size image.

{jpgs} is replaced with all images that start with the page's name.

{[page]:[img].jpg} is replaced with a thumbnail of the image and a link
to the page.

{https://calphotos.berkeley.edu/[...]} is replaced with a blank
thumbnail-sized box that links to the named page.  If the page is
followed by '|[text]', the text is put inside the box.

If a jpg or calphotos link starts a paragraph that has additional
elements in it, all such elements (including free text) is put in a
flexbox and centered vertically with respect to each other.

Page links:

{[com]:[elab]} links to CalFlora with both names.  [com] is optional.
If there is a hyphen prior to [com], the common name and scientific
name are printed on one line.  Otherwise they are printed on two
lines.

{[page]} is replaced with a link to the page.  This does not create a
parent-child page relationship.  If both the common name and
scientific name are known and there is a hyphen prior to the page
name, they are printed on the same line.  Otherwise they are printed
on two lines.

{-[page]} is replaced with a link to the page.  If both the common
name and scientific name are known, they are printed on just one line.

{child:[page]} is replaced with a link to the page.  This also records
a relationship between the parent (the current page) and the child (the
linked page).

{+[page]} is replaced with two links to the page.  The first link is
from a thumbnail of the first flower associated with the page.  The
second link is from the name of the page (common name + scientific name).
A parent-child relationship is also recorded.

Other:

{sci} is replaced with the flower's scientific name.

{-
[list items]
-}
is replaced with proper HTML list syntax, i.e. surrounded by <ul>...</ul>,
with each line also surrounded by <li>...</li>.
A sublist can be included, but must use <ul> and </ul>, each on a line
by itself.

###############################################################################

An easy method to search would be nice.
  I.e. a search bar on every page would be easier than
  opening all.html, hitting the hamburger, and using find in page.

https://medium.com/outsystems-experts/javascript-events-unmasked-how-to-create-an-input-mask-for-mobile-fc0df165e8b2

var input = document.getElementById('credit-card-mask'),
    oldValue,
    keydownHandler= function(e) {
      oldValue = e.target.value;
    },
    inputHandler= function(e) {
      var el = e.target,
          newValue = el.value
      ;
    }
;

input.addEventListener('keydown', keydownHandler);
input.addEventListener('input', inputHandler);

###############################################################################

Make separate pages (and links) for flower lists (by color and "all")
with names only (for bandwidth saving) and photos only (for fast skimming).

Add links at the top of primary color pages to secondary color anchors.

it would be nice to attach colors to individual jpgs of a flower,
  e.g. for baby blue eyes (N. menziesii).

It would be nice to have a glossary with popup links automatically created
  where glossary words are used.
Jepson example:
<u class="dotted" title="Group of bracts more or less held together as a unit, subtending a flower, fruit (acorn cup), or inflorescence." >Involucre</u>

Print errors:
  no color listed
  broken photo
  no scientific name for leaf page

Identify genuses with multiple species but without a container page.

Reject iNaturalist community ID as necessary, especially where I otherwise
have 0 observations.

combine sweet peas and vetchlings (both are Lathyrus spp.)

https://www.inaturalist.org/observations/13217699#activity_identification_58579616

Allow observations and CalFlora links to be inserted manually
  in the middle of a page, potentially multiple times, e.g. with {obs:[sci]}

Retain child order within parent on list pages.  (Only sort top level.)

###############################################################################

It'd be nice to split the img and text onto separate lines on small
screens only, e.g. for ceanothus.
  e.g. create photo-box-split with @media condition:
    for small screens change "display: flex;" to "display: block;"
I'm not sure it's possible to leave the child name on the img line and
  drop out the remaining lines.  They're currently all in one span.
  Making it two spans puts them in separate columns.
Maybe put a box around it for clarity.

Proposed:
  {++...} instead of {+...}
  support {++[page]:[jpg]} for image & text linked to child page & split

###############################################################################

how to mass rename files:
for f in *.jpg; do git mv "$f" "$(echo $f | sed 's/-\([-0-9]*\)\.jpg$/,\1.jpg/')"; done

The related species Triteleia lugens, which grows around Pinnacles National Park and north of San Francisco Bay, has rounded ends to the stamen filaments, not forked appendages.
